---
import BaseLayout from "@/layouts/BaseLayout.astro";

const orders = [
  { id: "ORD-2024-001", date: "28.11.2024", status: "delivered", total: 89.97, items: [
    { name: "T-Shirt Classic Weiss", quantity: 2, price: 29.99 },
    { name: "Socken 3er Pack", quantity: 1, price: 29.99 },
  ]},
  { id: "ORD-2024-002", date: "15.11.2024", status: "delivered", total: 149.50, items: [
    { name: "Winterjacke Navy", quantity: 1, price: 149.50 },
  ]},
  { id: "ORD-2024-003", date: "02.11.2024", status: "delivered", total: 34.99, items: [
    { name: "Muetze Grau", quantity: 1, price: 34.99 },
  ]},
];

const statusLabels: Record<string, string> = {
  pending: "In Bearbeitung",
  paid: "Bezahlt",
  shipped: "Versendet",
  delivered: "Geliefert",
  cancelled: "Storniert",
};

const statusColors: Record<string, string> = {
  pending: "bg-yellow-100 text-yellow-800",
  paid: "bg-blue-100 text-blue-800",
  shipped: "bg-purple-100 text-purple-800",
  delivered: "bg-green-100 text-green-800",
  cancelled: "bg-red-100 text-red-800",
};
---

<BaseLayout title="Meine Bestellungen">
  <div class="mx-auto max-w-4xl px-4 py-8">
    <div class="mb-6 flex items-center gap-4">
      <a href="/account" class="text-gray-400 hover:text-gray-600">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
      </a>
      <h1 class="text-2xl font-bold">Meine Bestellungen</h1>
    </div>

    <div class="space-y-4">
      {orders.map((order) => (
        <div class="rounded-lg bg-white shadow">
          <div class="flex items-center justify-between border-b p-4">
            <div>
              <p class="font-semibold">{order.id}</p>
              <p class="text-sm text-gray-500">Bestellt am {order.date}</p>
            </div>
            <div class="text-right">
              <span class={`inline-block rounded-full px-3 py-1 text-sm ${statusColors[order.status]}`}>{statusLabels[order.status]}</span>
            </div>
          </div>

          <div class="p-4">
            <div class="space-y-3">
              {order.items.map((item) => (
                <div class="flex items-center gap-4">
                  <div class="h-16 w-16 rounded bg-gray-100"></div>
                  <div class="flex-1">
                    <p class="font-medium">{item.name}</p>
                    <p class="text-sm text-gray-500">Menge: {item.quantity}</p>
                  </div>
                  <p class="font-medium">{item.price.toFixed(2).replace(".", ",")} EUR</p>
                </div>
              ))}
            </div>
          </div>

          <div class="flex items-center justify-between border-t bg-gray-50 p-4">
            <div class="flex gap-2">
              <a href={`/account/orders/${order.id}`} class="rounded border border-gray-300 px-4 py-2 text-sm hover:bg-white">Details</a>
              {order.status === "delivered" && (
                <button class="rounded border border-gray-300 px-4 py-2 text-sm hover:bg-white">Erneut bestellen</button>
              )}
            </div>
            <p class="font-semibold">Gesamt: {order.total.toFixed(2).replace(".", ",")} EUR</p>
          </div>
        </div>
      ))}
    </div>

    {orders.length === 0 && (
      <div class="rounded-lg bg-white p-12 text-center shadow">
        <svg class="mx-auto h-12 w-12 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>
        <p class="mt-4 text-gray-500">Sie haben noch keine Bestellungen.</p>
        <a href="/products" class="mt-4 inline-block rounded-lg bg-primary-600 px-6 py-2 text-white hover:bg-primary-700">Jetzt shoppen</a>
      </div>
    )}
  </div>
</BaseLayout>
